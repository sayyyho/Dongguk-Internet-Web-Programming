<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>2022학년도 2학기 인터넷프로그래밍 기말고사</title>

        <link rel="stylesheet" type="text/css" href="style.css" />
        <script type="text/javascript">

            function name_empty_check(obj) {
                /* (1) 이름은 공백을 허용하지 않으며, 공백 입력 시 경고 창을 팝업 하는 함수 완성 (3점) */
                
                if(obj.value=="")
                {
                    alert("이름은 공백 입력 안됩니다!\n 다시 입력하세요.")
                }
            }
            function changeImage() {
                let selectList = document.getElementById("leclist");
                let value = selectList.options[document.getElementById("leclist").selectedIndex].value;
                let index = selectList.seledtedIndex;
                let img = document.getElementById("lecimg");
                img.src = value;
                /* (2) 강좌를 선택하면 왼쪽 이미지에 선택 강좌 이미지를 표시하는 함수 (단, 단일 선택만 고려) (3점) */
            }

            function selection_details() {
                var total=0, lecture="", cnt=0;
                let name = document.getElementById("name");
                let result = document.getElementById("result");
                let value;
                let selectList = document.getElementById("leclist");
                value = selectList.options[document.getElementById("leclist").selectedIndex].innerHTML;
                console.log(value);
                let mylist = value.split(" ")
                // let num = parseInt(mylist);
                console.log(mylist);
                total+=parseInt(mylist[1])*1000
                console.log(total);
                let data = new Array();
                data.push(mylist[0]);
                result.innerHTML = name.value +"님께서는, " + data.length +"강좌를 신청하셨습니다.\n"+"신청강좌는" ;
                /* (3) 강좌 선택에 따른 신청 내역 및 총합계 출력, 막대바 영역에 반영하는 함수 (15점)
                        1) 강좌 목록은 다중 선택이 가능하며, 강좌 선택 시 선택 강좌명과 수강금액 누적 (7점)
                        2) 입력한 이름, 선택한 강좌 목록, 선택 강좌 수, 결제 금액은 텍스트 영역에 표시 (5점)
                        3) 수강금액 누적 금액에 따라 막대바 영역에 반영되어 표시 (3점)  */

            }
            function Timer() {
                /* (4) 현재 시간을 매 초마다 출력하는 함수 완성 (4점) */
                let time = document.getElementById("time");
                const date = new Date();
                const hours = String(date.getHours()).padStart(2,"0");
                const minutes = String(date.getMinutes()).padStart(2, "0");
                const seconds = String(date.getSeconds()).padStart(2, "0");
                time.value = (`${hours}:${minutes}:${seconds}`);
            }
            function payment() {
                /* (5) 결제 버튼을 클릭하면 확인 대화상자에 입력한 이름과 함께 결제 여부 확인 창 팝업 (3점) */	  
                let name = document.getElementById("name");
                confirm(name.value +"님, 신청내역을 결제하시겠습니까?"); 
            }
        </script>
    </head>
    <body onload="Timer()">
        <header>
            <hgroup>
                <h1>2022학년 2학기 인터넷프로그래밍</h1>
                <h2>기말고사</h2>
            </hgroup>
        </header>
   
        <article>
            <div id="wrapper">
                <h1>[웹언어 강좌 수강신청]</h1>

                <img id="lecimg" src="https://www.booksr.co.kr/wp-content/uploads/2022/01/bookcover_img343.jpg" width="297" height="357">
            
                <div id="right">
                    <form method="get">
                        <table>
                            <tr>
                                <td class="right">이 름 :</td>
                                <td colspan="2"><input type="text" id="name" onblur="name_empty_check(this)" /></td>
                            </tr>                            
                            <tr height="100">
                                <td class="right">강좌 목록 :</td>
                                <td colspan="2">
                                    <select id="leclist" multiple style="width:173px;" onchange="changeImage()">
                                        <option value="img/html5.png" onmouseup="selection_details()">HTML5 30,000원</option>
                                        <option value="img/css3.png" onmouseup="selection_details()">CSS3 50,000원</option>
                                        <option value="img/javascript.png" onmouseup="selection_details()">JavaScript 70,000원</option>
                                        <option value="img/jquery.png" onmouseup="selection_details()">jQuery 100,000원</option>
                                    </select><br><br>
                                </td>
                            </tr>		
                            <tr>
                                <td class="right">신청 내역 :</td>
                                <td colspan="2"><textarea rows="6" cols="52" id="result" disabled></textarea></td>
                            </tr>					
                            <tr>
                                <td class="right">총 합 계 :</td>
                                <td><input type="text" id="total" value="0" disabled />원</td>
                                <td class="right"><meter style="width:170px" id="mt" value="0" low="30000" min="0" max="250000"></meter></td>
                            </tr>					                         
                            <tr>
                                <td class="right">현재 시간 :</td>
                                <td ><input type="text" id="time" disabled /></td>
                                <td style="text-align: center;"><input type="button" value="결제" onclick="payment()" />
                                <input type="reset" id="cancel" value="취소" /></td>
                            </tr>		
                        </table>
                    </form>
                </div>
            </div>
        </article>

        <!-- (6) "본인 학번 이름 작성 부분"에 본인 정보로 대체할 것 (2점) -->
        <footer>2022년 12월 8일 / 작성자 : 2019112127 박세호</footer>
        <script>
            Timer();
            setInterval(Timer,1000)
        </script>
    </body> 
</html> 
